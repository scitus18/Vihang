<?xml version="1.0"?>
<robot name="tilt_drone" xmlns:xacro="http://www.ros.org/wiki/xacro">

  <!-- Include all property and macro files -->
  <xacro:include filename="properties.xacro"/>
  <xacro:include filename="macros.xacro"/>
  <xacro:include filename="sensors.xacro"/>
  <xacro:include filename="gazebo.xacro"/>

  <!-- Main Body (Base Link) -->
  <link name="base_link">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="${body_radius}" length="${body_length}"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="${body_radius}" length="${body_length}"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="${body_mass}"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="${body_ixx}" ixy="0" ixz="0" iyy="${body_iyy}" iyz="0" izz="${body_izz}"/>
    </inertial>
  </link>

  <!-- Left Wing Assembly -->
  <xacro:wing prefix="left" reflect="1"/>

  <!-- Right Wing Assembly -->
  <xacro:wing prefix="right" reflect="-1"/>

  <!-- Left Front Motor Assembly -->
  <xacro:motor_assembly prefix="left_front" wing_prefix="left" x_pos="${front_motor_x}"/>

  <!-- Left Rear Motor Assembly -->
  <xacro:motor_assembly prefix="left_rear" wing_prefix="left" x_pos="${rear_motor_x}"/>

  <!-- Right Front Motor Assembly -->
  <xacro:motor_assembly prefix="right_front" wing_prefix="right" x_pos="${front_motor_x}"/>

  <!-- Right Rear Motor Assembly -->
  <xacro:motor_assembly prefix="right_rear" wing_prefix="right" x_pos="${rear_motor_x}"/>

  <!-- Sensors -->
  <xacro:imu_sensor parent_link="base_link"/>
  <xacro:gps_sensor parent_link="base_link"/>
  <xacro:barometer_sensor parent_link="base_link"/>
  <xacro:magnetometer_sensor parent_link="imu_link"/>

</robot>